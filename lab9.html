<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pro To-Do List</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        font-family: Poppins, sans-serif;
        background: #f5f5f5;
        transition: 0.5s;
      }
      body.dark {
        background: #1c1c1c;
        color: #e5e5e5;
      }
      .container {
        width: 500px;
        background: #fff;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
        transition: 0.5s;
      }
      body.dark .container {
        background: #2c2c2c;
      }
      h2 {
        text-align: center;
        margin-bottom: 15px;
        font-size: 2rem;
        color: #0ea5e9;
      }
      .row {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        align-items: center;
      }
      input,
      select {
        flex: 1;
        padding: 12px;
        border-radius: 12px;
        border: 2px solid #ccc;
        outline: none;
        font-size: 1rem;
        background: none;
        color: #1c1c1c;
        transition: 0.3s;
      }
      body.dark input,
      body.dark select {
        border-color: #555;
        color: #e5e5e5;
      }
      input:focus,
      select:focus {
        border-color: #0ea5e9;
      }
      button {
        cursor: pointer;
        font-weight: 600;
        border: none;
        border-radius: 12px;
        transition: 0.3s;
      }
      .addBtn {
        padding: 12px 18px;
        background: #0ea5e9;
        color: #fff;
      }
      .addBtn:hover {
        transform: scale(1.05);
        opacity: 0.85;
      }
      .themeBtn {
        padding: 7px 15px;
        background: #0ea5e9;
        color: #fff;
      }
      .themeBtn:hover {
        transform: scale(1.05);
        opacity: 0.85;
      }
      ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 15px;
        margin-bottom: 12px;
        border-radius: 12px;
        background: #f0f0f0;
        box-shadow: 0 5px 12px rgba(0, 0, 0, 0.05);
        transition: 0.3s, transform 0.3s, opacity 0.5s;
        opacity: 0;
        transform: translateY(-10px);
      }
      li.show {
        opacity: 1;
        transform: translateY(0) scale(1);
        animation: bounce 0.3s ease;
      }
      @keyframes bounce {
        0% {
          transform: translateY(-20px) scale(0.95);
        }
        50% {
          transform: translateY(0) scale(1.05);
        }
        100% {
          transform: translateY(0) scale(1);
        }
      }
      body.dark li {
        background: #3a3a3a;
      }
      li:hover {
        transform: translateY(-2px) scale(1.01);
        background: #e0f7ff30;
      }
      body.dark li:hover {
        background: #0ea5e930;
      }
      .done {
        text-decoration: line-through;
        color: #999;
        opacity: 0.7;
        transition: 0.3s;
      }
      .icons span {
        margin-left: 12px;
        cursor: pointer;
        transition: 0.2s;
        font-size: 18px;
        display: inline-block;
      }
      .icons span:hover {
        transform: scale(1.3);
        color: #0ea5e9;
      }
      .badge {
        padding: 3px 10px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
        color: #fff;
        display: flex;
        align-items: center;
        gap: 4px;
        transition: 0.3s;
      }
      .high {
        background: #ef4444;
      }
      .medium {
        background: #0ea5e9;
      }
      .low {
        background: #10b981;
      }
      .done .badge {
        background: #999 !important;
        color: #eee !important;
        animation: badgeBounce 0.3s;
      }
      @keyframes checkBounce {
        0% {
          transform: scale(0.5);
        }
        50% {
          transform: scale(1.3);
        }
        100% {
          transform: scale(1);
        }
      }
      @keyframes badgeBounce {
        0% {
          transform: scale(0.8);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <h2 style="flex: 1">Pro To-Do List</h2>
        <button class="themeBtn" onclick="toggleTheme()">üåô</button>
      </div>
      <div class="row">
        <input id="taskInput" placeholder="Add a task..." />
        <select id="prioritySelect">
          <option value="high">High ‚ö†Ô∏è</option>
          <option value="medium" selected>Medium üîπ</option>
          <option value="low">Low ‚úÖ</option>
        </select>
        <button class="addBtn" onclick="addTask()">+</button>
      </div>
      <ul id="taskList"></ul>
    </div>

    <script>
      const taskList = document.getElementById("taskList");
      const taskInput = document.getElementById("taskInput");
      const prioritySelect = document.getElementById("prioritySelect");

      window.onload = () => {
        const tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
        tasks.forEach((t) => createTask(t.text, t.done, t.priority));
        if (localStorage.getItem("theme") === "dark")
          document.body.classList.add("dark");
      };

      function saveTasks() {
        const tasks = Array.from(taskList.children).map((li) => ({
          text: li.querySelector(".text").textContent,
          done: li.querySelector(".text").classList.contains("done"),
          priority: li.dataset.priority,
        }));
        localStorage.setItem("tasks", JSON.stringify(tasks));
        localStorage.setItem(
          "theme",
          document.body.classList.contains("dark") ? "dark" : "light"
        );
      }

      function createTask(text, done = false, priority = "medium") {
        const li = document.createElement("li");
        li.dataset.priority = priority;
        const textSpan = document.createElement("span");
        textSpan.className = "text";
        textSpan.textContent = text;
        if (done) textSpan.classList.add("done");
        const badge = document.createElement("span");
        badge.className = "badge " + priority;
        const icon =
          priority === "high" ? "‚ö†Ô∏è" : priority === "medium" ? "üîπ" : "‚úÖ";
        badge.textContent =
          icon + " " + priority.charAt(0).toUpperCase() + priority.slice(1);
        li.append(textSpan, badge);
        const icons = document.createElement("div");
        icons.className = "icons";
        const doneBtn = document.createElement("span");
        doneBtn.textContent = "‚úî";
        doneBtn.onclick = () => {
          textSpan.classList.toggle("done");
          badge.classList.toggle("done");
          doneBtn.style.animation = "checkBounce 0.3s";
          badge.style.animation = "badgeBounce 0.3s";
          setTimeout(() => {
            doneBtn.style.animation = "";
            badge.style.animation = "";
          }, 300);
          saveTasks();
        };
        const editBtn = document.createElement("span");
        editBtn.textContent = "‚úé";
        editBtn.onclick = () => {
          const n = prompt("Edit task:", textSpan.textContent);
          if (n && n.trim() !== "") {
            textSpan.textContent = n.trim();
            saveTasks();
          }
        };
        const deleteBtn = document.createElement("span");
        deleteBtn.textContent = "üóë";
        deleteBtn.onclick = () => {
          li.style.opacity = 0;
          li.style.transform = "translateX(50px)";
          setTimeout(() => {
            li.remove();
            saveTasks();
          }, 300);
        };
        icons.append(doneBtn, editBtn, deleteBtn);
        li.appendChild(icons);
        taskList.appendChild(li);
        setTimeout(() => li.classList.add("show"), 10);
      }

      function addTask() {
        const v = taskInput.value.trim();
        if (!v) return;
        createTask(v, false, prioritySelect.value);
        taskInput.value = "";
        saveTasks();
      }
      function toggleTheme() {
        document.body.classList.toggle("dark");
        saveTasks();
      }
      taskInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") addTask();
      });
    </script>
  </body>
</html>
